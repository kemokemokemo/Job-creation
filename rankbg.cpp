// ====================================================================================================
//
// ランキング背景処理[rankbg.cpp]
// Author : Kimura kouta
//
// ====================================================================================================

// ====================================================================================================
//
// インクルードファイル
//
// ====================================================================================================
#include "rankbg.h"
#include "input.h"
#include "fade.h"
#include "light.h"
#include "camera.h"
#include "meshField.h"
#include "Controlar.h"
#include "sound.h"

// ====================================================================================================
//
// マクロ定義
//
// ====================================================================================================

// ====================================================================================================
//
// グローバル変数
//
// ====================================================================================================

// ====================================================================================================
//
// ランキング背景初期化処理
//
// ====================================================================================================
void InitRankbg(void)
{

	InitLight();
	InitCamera();
	InitMeshField();

}

// ====================================================================================================
//
// ランキング背景終了処理
//
// ====================================================================================================
void UninitRankbg(void)
{

	UninitLight();
	UninitCamera();
	UninitMeshField();

}

// ====================================================================================================
//
// ランキング背景更新処理
//
// ====================================================================================================
void UpdateRankbg(void)
{


	UpdateLight();
	UpdateCamera();
	UpdateMeshField();

	static int nCnt = 0;

	nCnt++;
	if (GetFade() == FADE_NONE)
	{
		if (GetKeyboardTrigger(DIK_RETURN)||GetJoypadTrigger(0, JOYPADKEY_START)&& GetFade() == FADE_NONE || nCnt >= 300 && GetFade() == FADE_NONE)
		{
			PlaySound(SOUND_LABEL_SE_ENTER);
			SetFade(MODE_TITLE);
			nCnt = 0;
		}
	}
}

// ====================================================================================================
//
// ランキング背景描画処理
//
// ====================================================================================================
void DrawRankbg(void)
{

	SetCamera();

	DrawMeshField();

}